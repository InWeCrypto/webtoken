webpackJsonp([12],{469:function(e,t,a){a(572);var r=a(179)(a(499),a(552),null,null);e.exports=r.exports},485:function(e,t,a){e.exports={default:a(486),__esModule:!0}},486:function(e,t,a){a(490),e.exports=a(56).Object.assign},487:function(e,t,a){"use strict";var r=a(181),o=a(488),s=a(489),l=a(182),i=a(180),n=Object.assign;e.exports=!n||a(124)(function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(e){t[e]=e}),7!=n({},e)[a]||Object.keys(n({},t)).join("")!=r})?function(e,t){for(var a=l(e),n=arguments.length,c=1,d=o.f,u=s.f;n>c;)for(var m,p=i(arguments[c++]),f=d?r(p).concat(d(p)):r(p),g=f.length,b=0;g>b;)u.call(p,m=f[b++])&&(a[m]=p[m]);return a}:n},488:function(e,t){t.f=Object.getOwnPropertySymbols},489:function(e,t){t.f={}.propertyIsEnumerable},490:function(e,t,a){var r=a(123);r(r.S+r.F,"Object",{assign:a(487)})},499:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(485),o=a.n(r);t.default={data:function(){var e=this;return{url:"/admin",tableData:[],addDialog:!1,editDialog:!1,record:{},roles:[],defaultProps:{children:"child",label:"name"},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],name:[{required:!0,message:"请输入登录账号",trigger:"blur"}],role_id:[{required:!0,message:"请选择角色"}],password:[{message:"请输入密码,长度6~30位",min:6,max:30,validator:function(t,a,r){""!=a&&a!==e.record.password_confirmation&&""!=e.role.password_confirmation?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],password_confirmation:[{message:"请输入密码,长度6~30位",min:6,max:30,validator:function(t,a,r){""!=a&&a!==e.record.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]}}},mounted:function(){this.getData(),this.getRoles(),this.resetRecord()},methods:{resetRecord:function(){this.record=o()({},{nickname:"",name:"",email:"",duty:"",role_id:"",status:1,password:"",password_confirmation:""})},getData:function(){var e=this;e.$emit("changeLoading"),e.$axios.get(e.url).then(function(t){e.$emit("changeLoading"),e.tableData=t.data.data.list})},getRoles:function(){var e=this;e.$axios.get("/role").then(function(t){e.roles=t.data.data.list})},formatter:function(e,t){return e.created_at},handleAdd:function(){this.addDialog=!0,this.resetRecord()},postAdd:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.$emit("changeLoading"),t.$axios.post(t.url,t.record).then(function(e){if(t.$emit("changeLoading"),4e3!=e.data.code)return t.$message({message:e.data.msg,type:"error"}),!1;t.$message({message:e.data.msg,type:"success"}),t.getData(),t.addDialog=!1})})},handleEdit:function(e,t){this.editDialog=!0,console.log(t),this.record=o()({},t),this.record.role_id||(this.record.role_id=""),this.record.status=!!this.record.status},putEdit:function(e){var t=this;t.$emit("changeLoading"),t.$axios.put(t.url+"/"+e.id,e).then(function(e){t.$emit("changeLoading"),4e3==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.getData()):t.$message({message:e.data.msg,type:"error"})})},handleDelete:function(e,t){var a=this;a.$emit("changeLoading"),a.$axios.delete(a.url+"/"+t.id).then(function(e){a.$emit("changeLoading"),4e3==e.data.code?(a.$message({message:e.data.msg,type:"success"}),a.getData()):a.$message({message:e.data.msg,type:"error"})})},handleRole:function(e){var t=this;setTimeout(function(){t.$refs.tree.setCheckedKeys(e.module_ids.split(","))},0),this.role=o()({},e)},postRole:function(){var e=this;e.$emit("changeLoading"),e.$axios.put("/module/"+e.role.id,this.$refs.tree.getCheckedKeys()).then(function(t){e.$emit("changeLoading"),4e3==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.getData()):e.$message({message:t.data.msg,type:"error"})})}}}},522:function(e,t,a){t=e.exports=a(62)(void 0),t.push([e.i,".el-table .cell,.el-table th>div{padding-left:0;padding-right:0}.el-button+.el-button{margin-left:0}.el-table td,.el-table th{padding-right:5px}",""])},552:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 员工管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("列表")])],1)],1),e._v(" "),a("div",{staticClass:"z-title"},[a("el-button",{staticClass:"z-right",attrs:{type:"primary"},on:{click:function(t){e.handleAdd()}}},[e._v("添加\n        ")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-align":"center"}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"登录账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role.name",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status_zh",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"管理员添加",visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"add",attrs:{model:e.record,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"登录账号",prop:"name"}},[a("el-input",{model:{value:e.record.name,callback:function(t){e.record.name=t},expression:"record.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{model:{value:e.record.nickname,callback:function(t){e.record.nickname=t},expression:"record.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.record.password,callback:function(t){e.record.password=t},expression:"record.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.record.password_confirmation,callback:function(t){e.record.password_confirmation=t},expression:"record.password_confirmation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.record.role_id,callback:function(t){e.record.role_id=t},expression:"record.role_id"}},e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.record.status,callback:function(t){e.record.status=t},expression:"record.status"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.postAdd("add")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"角色编辑",visible:e.editDialog},on:{"update:visible":function(t){e.editDialog=t}}},[a("el-form",{ref:"add",attrs:{model:e.record,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"登录账号",prop:"name"}},[a("el-input",{model:{value:e.record.name,callback:function(t){e.record.name=t},expression:"record.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{model:{value:e.record.nickname,callback:function(t){e.record.nickname=t},expression:"record.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.record.password,callback:function(t){e.record.password=t},expression:"record.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.record.password_confirmation,callback:function(t){e.record.password_confirmation=t},expression:"record.password_confirmation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.record.role_id,callback:function(t){e.record.role_id=t},expression:"record.role_id"}},e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.record.status,callback:function(t){e.record.status=t},expression:"record.status"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editDialog=!1,e.putEdit(e.record)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},572:function(e,t,a){var r=a(522);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(178)("a4fb2c78",r,!0)}});
//# sourceMappingURL=12.e52c0848c4f33185108e.js.map