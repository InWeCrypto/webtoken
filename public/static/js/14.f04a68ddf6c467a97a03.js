webpackJsonp([14],{481:function(e,r,a){a(570);var o=a(179)(a(511),a(550),null,null);e.exports=o.exports},491:function(e,r,a){"use strict";var o=a(18),t=a.n(o);r.a=new t.a},492:function(e,r,a){e.exports={default:a(493),__esModule:!0}},493:function(e,r,a){var o=a(56),t=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return t.stringify.apply(t,arguments)}},511:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=a(492),t=a.n(o),s=a(491);r.default={data:function(){var e=this;return{ruleForm:{nickname:"",name:"",old_password:"",password:"",password_confirmation:"",img:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],name:[{required:!0,message:"请输入登录账号",trigger:"blur"}],old_password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],password:[{trigger:"blur",min:6,max:30},{validator:function(r,a,o){""!=a&&a!==e.ruleForm.password_confirmation&&""!=e.ruleForm.password_confirmation?o(new Error("两次输入密码不一致!")):o()}}],password_confirmation:[{trigger:"blur",min:6,max:30},{validator:function(r,a,o){""!=a&&a!==e.ruleForm.password?o(new Error("两次输入密码不一致!")):o()}}]},headers:{ct:""}}},mounted:function(){var e=JSON.parse(localStorage.getItem("user_info")),r=e.user,a=e.token;this.ruleForm.nickname=r.nickname,this.ruleForm.name=r.name,this.ruleForm.img=r.img,this.headers.ct=a},methods:{onSubmit:function(e){var r=this;r.$refs[e].validate(function(e){if(!e)return!1;r.$emit("changeLoading"),r.$axios.post("/user",r.ruleForm).then(function(e){if(r.$emit("changeLoading"),4e3==e.data.code){var a=JSON.parse(localStorage.getItem("user_info"));a.user=e.data.data.user,localStorage.setItem("user_info",t()(a)),s.a.$emit("updateInfo",{nickname:r.ruleForm.nickname,headUrl:r.$rootPath+r.ruleForm.img}),r.ruleForm.old_password=r.ruleForm.password=r.ruleForm.password_confirmation="",r.$message({message:e.data.msg,type:"success"})}else r.$message({message:e.data.msg,type:"error"})})})},handleAvatarSuccess:function(e,r){this.ruleForm.img=e.data.uri},beforeAvatarUpload:function(e){var r=e.size/1024/1024<2;return r||this.$message.error("上传头像图片大小不能超过 2MB!"),r}}}},520:function(e,r,a){r=e.exports=a(62)(void 0),r.push([e.i,".avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;width:auto}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar{width:178px;height:178px;display:block}.el-table .cell,.el-table th>div{padding-left:0;padding-right:0}.el-button+.el-button{margin-left:0}",""])},550:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-date"}),e._v("用户信息")]),e._v(" "),a("el-breadcrumb-item",[e._v("修改")])],1)],1),e._v(" "),a("div",{staticClass:"form-box"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"登录账号"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.ruleForm.name=r},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{model:{value:e.ruleForm.nickname,callback:function(r){e.ruleForm.nickname=r},expression:"ruleForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录密码",prop:"old_password"}},[a("el-input",{attrs:{type:"password",placeholder:"登录密码"},model:{value:e.ruleForm.old_password,callback:function(r){e.ruleForm.old_password=r},expression:"ruleForm.old_password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.ruleForm.password,callback:function(r){e.ruleForm.password=r},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.ruleForm.password_confirmation,callback:function(r){e.ruleForm.password_confirmation=r},expression:"ruleForm.password_confirmation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$apiPath+"/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,headers:e.headers,"with-credentials":!0}},[e.ruleForm.img?a("img",{staticClass:"avatar",attrs:{src:e.ruleForm.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(r){e.onSubmit("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)])},staticRenderFns:[]}},570:function(e,r,a){var o=a(520);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(178)("f2f41bc0",o,!0)}});
//# sourceMappingURL=14.f04a68ddf6c467a97a03.js.map