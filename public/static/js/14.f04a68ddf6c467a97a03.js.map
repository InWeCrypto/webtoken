{"version":3,"sources":["webpack:///static/js/14.f04a68ddf6c467a97a03.js","webpack:///./src/components/provider/User.vue","webpack:///./src/Bus.js?db8d","webpack:///./~/babel-runtime/core-js/json/stringify.js","webpack:///./~/core-js/library/fn/json/stringify.js","webpack:///User.vue","webpack:///./src/components/provider/User.vue?6ccd","webpack:///./src/components/provider/User.vue?b296","webpack:///./src/components/provider/User.vue?d136"],"names":["webpackJsonp","481","module","exports","__webpack_require__","Component","491","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_0_vue___default","n","a","492","default","__esModule","493","core","$JSON","JSON","stringify","it","apply","arguments","511","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_1_Bus__","data","_this","this","ruleForm","nickname","name","old_password","password","password_confirmation","img","rules","required","message","trigger","min","max","validator","rule","callback","Error","headers","ct","mounted","user_info","parse","localStorage","getItem","user","token","methods","onSubmit","form","self","$refs","validate","valid","$emit","$axios","post","then","res","code","userInfo","setItem","headUrl","$rootPath","$message","msg","type","handleAvatarSuccess","file","uri","beforeAvatarUpload","isLt2M","size","error","520","undefined","push","i","550","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator","_v","ref","model","label-width","label","$$v","expression","prop","placeholder","action","$apiPath","show-file-list","on-success","before-upload","with-credentials","src","on","click","$event","staticRenderFns","570","content","locals"],"mappings":"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","file":"static/js/14.f04a68ddf6c467a97a03.js","sourcesContent":["webpackJsonp([14],{\n\n/***/ 481:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(570)\n\nvar Component = __webpack_require__(179)(\n  /* script */\n  __webpack_require__(511),\n  /* template */\n  __webpack_require__(550),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 491:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_vue__);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_0_vue___default.a());\n\n/***/ }),\n\n/***/ 492:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(493), __esModule: true };\n\n/***/ }),\n\n/***/ 493:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core  = __webpack_require__(56)\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n/***/ }),\n\n/***/ 511:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(492);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_Bus__ = __webpack_require__(491);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        var _this = this;\n\n        var passwordRule = function passwordRule(rule, value, callback) {\n            if (value != '' && value !== _this.ruleForm.password_confirmation && _this.ruleForm.password_confirmation != '') {\n                callback(new Error('两次输入密码不一致!'));\n            } else {\n                callback();\n            }\n        };\n        var password_confirmationRule = function password_confirmationRule(rule, value, callback) {\n            if (value != '' && value !== _this.ruleForm.password) {\n                callback(new Error('两次输入密码不一致!'));\n            } else {\n                callback();\n            }\n        };\n        return {\n            ruleForm: {\n                nickname: '',\n                name: '',\n                old_password: '',\n                password: '',\n                password_confirmation: '',\n                img: ''\n            },\n            rules: {\n                nickname: [{ required: true, message: '请输入昵称', trigger: 'blur' }],\n                name: [{ required: true, message: '请输入登录账号', trigger: 'blur' }],\n                old_password: [{ required: true, message: '请输入登录密码', trigger: 'blur' }],\n                password: [{ trigger: 'blur', min: 6, max: 30 }, { validator: passwordRule }],\n                password_confirmation: [{ trigger: 'blur', min: 6, max: 30 }, { validator: password_confirmationRule }]\n            },\n            headers: {\n                ct: ''\n            }\n\n        };\n    },\n    mounted: function mounted() {\n        var user_info = JSON.parse(localStorage.getItem('user_info'));\n        var user = user_info.user;\n        var token = user_info.token;\n        this.ruleForm.nickname = user.nickname;\n        this.ruleForm.name = user.name;\n        this.ruleForm.img = user.img;\n        this.headers.ct = token;\n    },\n    methods: {\n        onSubmit: function onSubmit(form) {\n            var self = this;\n            self.$refs[form].validate(function (valid) {\n                if (valid) {\n                    self.$emit('changeLoading');\n                    self.$axios.post('/user', self.ruleForm).then(function (res) {\n                        self.$emit('changeLoading');\n                        if (res.data.code == 4000) {\n                            var userInfo = JSON.parse(localStorage.getItem('user_info'));\n                            userInfo.user = res.data.data.user;\n                            localStorage.setItem('user_info', __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(userInfo));\n                            __WEBPACK_IMPORTED_MODULE_1_Bus__[\"a\" /* default */].$emit('updateInfo', { nickname: self.ruleForm.nickname, headUrl: self.$rootPath + self.ruleForm.img });\n                            self.ruleForm.old_password = self.ruleForm.password = self.ruleForm.password_confirmation = '';\n                            self.$message({\n                                message: res.data.msg,\n                                type: 'success'\n                            });\n                        } else {\n                            self.$message({\n                                message: res.data.msg,\n                                type: 'error'\n                            });\n                        }\n                    });\n                } else {\n                    return false;\n                }\n            });\n        },\n        handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n            this.ruleForm.img = res.data.uri;\n        },\n        beforeAvatarUpload: function beforeAvatarUpload(file) {\n            var isLt2M = file.size / 1024 / 1024 < 2;\n            if (!isLt2M) {\n                this.$message.error('上传头像图片大小不能超过 2MB!');\n            }\n            return isLt2M;\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 520:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(62)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;width:auto}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar{width:178px;height:178px;display:block}.el-table .cell,.el-table th>div{padding-left:0;padding-right:0}.el-button+.el-button{margin-left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 550:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"crumbs\"\n  }, [_c('el-breadcrumb', {\n    attrs: {\n      \"separator\": \"/\"\n    }\n  }, [_c('el-breadcrumb-item', [_c('i', {\n    staticClass: \"el-icon-date\"\n  }), _vm._v(\"用户信息\")]), _vm._v(\" \"), _c('el-breadcrumb-item', [_vm._v(\"修改\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"form-box\"\n  }, [_c('el-form', {\n    ref: \"ruleForm\",\n    staticClass: \"demo-ruleForm\",\n    attrs: {\n      \"model\": _vm.ruleForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"登录账号\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.name),\n      callback: function($$v) {\n        _vm.ruleForm.name = $$v\n      },\n      expression: \"ruleForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"昵称\",\n      \"prop\": \"nickname\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.nickname),\n      callback: function($$v) {\n        _vm.ruleForm.nickname = $$v\n      },\n      expression: \"ruleForm.nickname\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"登录密码\",\n      \"prop\": \"old_password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"登录密码\"\n    },\n    model: {\n      value: (_vm.ruleForm.old_password),\n      callback: function($$v) {\n        _vm.ruleForm.old_password = $$v\n      },\n      expression: \"ruleForm.old_password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"新密码\",\n      \"prop\": \"password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"新密码\"\n    },\n    model: {\n      value: (_vm.ruleForm.password),\n      callback: function($$v) {\n        _vm.ruleForm.password = $$v\n      },\n      expression: \"ruleForm.password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"确认密码\",\n      \"prop\": \"password_confirmation\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"确认密码\"\n    },\n    model: {\n      value: (_vm.ruleForm.password_confirmation),\n      callback: function($$v) {\n        _vm.ruleForm.password_confirmation = $$v\n      },\n      expression: \"ruleForm.password_confirmation\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"上传头像\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"avatar-uploader\",\n    attrs: {\n      \"action\": _vm.$apiPath + '/upload',\n      \"show-file-list\": false,\n      \"on-success\": _vm.handleAvatarSuccess,\n      \"before-upload\": _vm.beforeAvatarUpload,\n      \"headers\": _vm.headers,\n      \"with-credentials\": true\n    }\n  }, [(_vm.ruleForm.img) ? _c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"src\": _vm.ruleForm.img\n    }\n  }) : _c('i', {\n    staticClass: \"el-icon-plus avatar-uploader-icon\"\n  })])], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSubmit('ruleForm')\n      }\n    }\n  }, [_vm._v(\"提交\")]), _vm._v(\" \"), _c('el-button', [_vm._v(\"取消\")])], 1)], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 570:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(520);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(178)(\"f2f41bc0\", content, true);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/14.f04a68ddf6c467a97a03.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-18c149d6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./User.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18c149d6\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./User.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/provider/User.vue\n// module id = 481\n// module chunks = 14","/**\n * Created by zhaoyadong on 2017/5/27.\n * 非继承组件通信总线\n */\nimport Vue from \"vue\";\nexport default new Vue;\n\n\n// WEBPACK FOOTER //\n// ./src/Bus.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/json/stringify.js\n// module id = 492\n// module chunks = 14 15","var core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/json/stringify.js\n// module id = 493\n// module chunks = 14 15","<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item><i class=\"el-icon-date\"></i>用户信息</el-breadcrumb-item>\n                <el-breadcrumb-item>修改</el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"form-box\">\n            <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\" class=\"demo-ruleForm\">\n                <el-form-item label=\"登录账号\">\n                    <el-input v-model=\"ruleForm.name\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"昵称\" prop=\"nickname\">\n                    <el-input v-model=\"ruleForm.nickname\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"登录密码\" prop=\"old_password\">\n                    <el-input type=\"password\" placeholder=\"登录密码\" v-model=\"ruleForm.old_password\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"新密码\" prop=\"password\">\n                    <el-input type=\"password\" placeholder=\"新密码\" v-model=\"ruleForm.password\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"确认密码\" prop=\"password_confirmation\">\n                    <el-input type=\"password\" placeholder=\"确认密码\" v-model=\"ruleForm.password_confirmation\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"上传头像\">\n                    <el-upload\n                            class=\"avatar-uploader\"\n                            :action=\"$apiPath+'/upload'\"\n                            :show-file-list=\"false\"\n                            :on-success=\"handleAvatarSuccess\"\n                            :before-upload=\"beforeAvatarUpload\"\n                            :headers=\"headers\"\n                            :with-credentials=\"true\">\n                        <img v-if=\"ruleForm.img\" :src=\"ruleForm.img\" class=\"avatar\">\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                    </el-upload>\n                </el-form-item>\n                <el-button type=\"primary\" @click=\"onSubmit('ruleForm')\">提交</el-button>\n                <el-button>取消</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import Bus from 'Bus';\n\n    export default {\n        data: function () {\n            var passwordRule = (rule, value, callback) => {\n                if (value != '' && value !== this.ruleForm.password_confirmation && this.ruleForm.password_confirmation != '') {\n                    callback(new Error('两次输入密码不一致!'));\n                } else {\n                    callback();\n                }\n            };\n            var password_confirmationRule = (rule, value, callback) => {\n                if (value != '' && value !== this.ruleForm.password) {\n                    callback(new Error('两次输入密码不一致!'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                ruleForm: {\n                    nickname: '',\n                    name: '',\n                    old_password: '',\n                    password: '',\n                    password_confirmation: '',\n                    img: '',\n                },\n                rules: {\n                    nickname: [\n                        {required: true, message: '请输入昵称', trigger: 'blur'}\n                    ],\n                    name: [\n                        {required: true, message: '请输入登录账号', trigger: 'blur'}\n                    ],\n                    old_password: [\n                        {required: true, message: '请输入登录密码', trigger: 'blur'}\n                    ],\n                    password: [\n                        { trigger: 'blur',min:6,max:30},\n                        {validator: passwordRule}\n                    ],\n                    password_confirmation: [\n                        { trigger: 'blur',min:6,max:30},\n                        {validator: password_confirmationRule}\n                    ]\n                },\n                headers: {\n                    ct: ''\n                }\n\n            };\n        },\n        mounted: function () {\n            let user_info = JSON.parse(localStorage.getItem('user_info'));\n            let user = user_info.user;\n            let token = user_info.token;\n            this.ruleForm.nickname = user.nickname;\n            this.ruleForm.name = user.name;\n            this.ruleForm.img = user.img;\n            this.headers.ct = token;\n        },\n        methods: {\n            onSubmit(form) {\n                let self = this;\n                self.$refs[form].validate((valid) => {\n                    if (valid) {\n                        self.$emit('changeLoading');\n                        self.$axios.post('/user', self.ruleForm).then((res) => {\n                            self.$emit('changeLoading');\n                            if (res.data.code == 4000) {\n                                let userInfo = JSON.parse(localStorage.getItem('user_info'));\n                                userInfo.user = res.data.data.user;\n                                localStorage.setItem('user_info', JSON.stringify(userInfo));\n                                Bus.$emit('updateInfo', {nickname: self.ruleForm.nickname, headUrl: self.$rootPath + self.ruleForm.img});\n                                self.ruleForm.old_password = self.ruleForm.password = self.ruleForm.password_confirmation = '';\n                                self.$message({\n                                    message: res.data.msg,\n                                    type: 'success'\n                                });\n                            } else {\n                                self.$message({\n                                    message: res.data.msg,\n                                    type: 'error'\n                                });\n                            }\n                        });\n\n                    } else {\n                        return false;\n                    }\n                });\n            },\n            handleAvatarSuccess(res, file) {\n                this.ruleForm.img = res.data.uri;\n            },\n            beforeAvatarUpload(file) {\n                const isLt2M = file.size / 1024 / 1024 < 2;\n                if (!isLt2M) {\n                    this.$message.error('上传头像图片大小不能超过 2MB!');\n                }\n                return isLt2M;\n            },\n        },\n    }\n</script>\n<style>\n    .avatar-uploader .el-upload {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        width: auto;\n    }\n\n    .avatar-uploader .el-upload:hover {\n        border-color: #20a0ff;\n    }\n\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 178px;\n        height: 178px;\n        line-height: 178px;\n        text-align: center;\n    }\n\n    .avatar {\n        width: 178px;\n        height: 178px;\n        display: block;\n    }\n\n\n    .el-table .cell, .el-table th>div{\n        padding-left: 0;\n        padding-right: 0;\n    }\n    .el-button+.el-button{\n        margin-left: 0;\n    }\n</style>\n\n\n// WEBPACK FOOTER //\n// User.vue?7b26d48d","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;width:auto}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar{width:178px;height:178px;display:block}.el-table .cell,.el-table th>div{padding-left:0;padding-right:0}.el-button+.el-button{margin-left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-18c149d6\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/provider/User.vue\n// module id = 520\n// module chunks = 14","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"crumbs\"\n  }, [_c('el-breadcrumb', {\n    attrs: {\n      \"separator\": \"/\"\n    }\n  }, [_c('el-breadcrumb-item', [_c('i', {\n    staticClass: \"el-icon-date\"\n  }), _vm._v(\"用户信息\")]), _vm._v(\" \"), _c('el-breadcrumb-item', [_vm._v(\"修改\")])], 1)], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"form-box\"\n  }, [_c('el-form', {\n    ref: \"ruleForm\",\n    staticClass: \"demo-ruleForm\",\n    attrs: {\n      \"model\": _vm.ruleForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"80px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"登录账号\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.name),\n      callback: function($$v) {\n        _vm.ruleForm.name = $$v\n      },\n      expression: \"ruleForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"昵称\",\n      \"prop\": \"nickname\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.nickname),\n      callback: function($$v) {\n        _vm.ruleForm.nickname = $$v\n      },\n      expression: \"ruleForm.nickname\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"登录密码\",\n      \"prop\": \"old_password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"登录密码\"\n    },\n    model: {\n      value: (_vm.ruleForm.old_password),\n      callback: function($$v) {\n        _vm.ruleForm.old_password = $$v\n      },\n      expression: \"ruleForm.old_password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"新密码\",\n      \"prop\": \"password\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"新密码\"\n    },\n    model: {\n      value: (_vm.ruleForm.password),\n      callback: function($$v) {\n        _vm.ruleForm.password = $$v\n      },\n      expression: \"ruleForm.password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"确认密码\",\n      \"prop\": \"password_confirmation\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"确认密码\"\n    },\n    model: {\n      value: (_vm.ruleForm.password_confirmation),\n      callback: function($$v) {\n        _vm.ruleForm.password_confirmation = $$v\n      },\n      expression: \"ruleForm.password_confirmation\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"上传头像\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"avatar-uploader\",\n    attrs: {\n      \"action\": _vm.$apiPath + '/upload',\n      \"show-file-list\": false,\n      \"on-success\": _vm.handleAvatarSuccess,\n      \"before-upload\": _vm.beforeAvatarUpload,\n      \"headers\": _vm.headers,\n      \"with-credentials\": true\n    }\n  }, [(_vm.ruleForm.img) ? _c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"src\": _vm.ruleForm.img\n    }\n  }) : _c('i', {\n    staticClass: \"el-icon-plus avatar-uploader-icon\"\n  })])], 1), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSubmit('ruleForm')\n      }\n    }\n  }, [_vm._v(\"提交\")]), _vm._v(\" \"), _c('el-button', [_vm._v(\"取消\")])], 1)], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-18c149d6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/provider/User.vue\n// module id = 550\n// module chunks = 14","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-18c149d6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./User.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"f2f41bc0\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-18c149d6\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/provider/User.vue\n// module id = 570\n// module chunks = 14"],"sourceRoot":""}